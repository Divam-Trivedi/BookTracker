{% extends 'library/base.html' %}
{% load static %}

{% block title %}Random Book - Book Tracker{% endblock %}

{% block content %}
<section style="padding: 0px;">
  <h2 style="text-align: center; margin-bottom: 15px;">Here's a Book Recommendation</h2>

  {% if book %}
    <div style="display: flex; justify-content: center;">
      <div style="background: #fff; border-radius: 8px; overflow: hidden; border: 1px solid #ddd; display: flex; flex-direction: column; align-items: center; padding: 20px; width: 300px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">

        <!-- Cover Image -->
        <div style="width: 100%; height: 300px; display: flex; align-items: center; justify-content: center; background-color: #fff;">
          {% if book.cover_url %}
            <img src="{{ book.cover_url }}" alt="{{ book.title }}"
              style="max-height: 100%; max-width: 100%; object-fit: contain;"
              onerror="this.onerror=null; this.src='{% static 'images/no_image.png' %}';">
          {% else %}
            <img src="{% static 'images/no_image.png' %}" alt="No Image"
              style="max-height: 100%; max-width: 100%; object-fit: contain;">
          {% endif %}
        </div>

        <!-- Details -->
        <h3 style="text-align: center; margin: 10px 0 5px 0;">{{ book.title }}</h3>
        <p style="color: #555; font-style: italic; text-align: center;">by {{ book.authors }}</p>
        <p style="color: #777; font-size: 0.9em; text-align: center;">Genre: {{ book.categories }}</p>

        <!-- Buttons -->
        <div style="margin-top: 20px; display: flex; gap: 10px;">
          <!-- Add to Library button -->
          <form method="POST" action="{% url 'add_to_library' book.id %}">
            {% csrf_token %}
            <button type="submit" style="padding: 10px 16px; background-color: #28a745; color: white; border: none; border-radius: 6px; font-size: 16px; cursor: pointer;">
              Add to Library
            </button>
          </form>

          <!-- Surprise Me Again button (link styled as button) -->
          <a href="{% url 'surprise_result' %}" 
            style="padding: 10px 16px; background-color: #007bff; color: white; border: none; border-radius: 6px; font-size: 16px; text-decoration: none; display: inline-block; cursor: pointer;">
            Surprise Again
          </a>
        </div>
      </div>
    </div>
  {% else %}
    <p style="text-align: center; font-size: 18px; color: #888;">No books available yet.</p>
  {% endif %}
</section>
{% endblock %}
